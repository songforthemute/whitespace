---
import Layout from "@/layouts/Layout.astro";
import { formatDate } from "@/lib/format";
import { getPostsByType, getPublishedDate, loadPublishedDates, sortByDate } from "@/lib/posts";

const publishedDates = loadPublishedDates();
const posts = sortByDate(getPostsByType("thought"), publishedDates);
---

<Layout title="Thoughts" description="Short essays" showSearch>
	<h1>Thoughts</h1>

	{posts.length === 0 ? (
		<p>No posts yet.</p>
	) : (
		<div class="timeline">
			{posts.map((post) => {
				const date = getPublishedDate(post, publishedDates);
				return (
					<article>
						<time datetime={date}>{formatDate(date)}</time>
						<h3><a href={`/thought/${post.slug}`}>{post.title}</a></h3>
					</article>
				);
			})}
		</div>
	)}
</Layout>

<style>
	h1 {
		margin-bottom: 2rem;
	}
	.timeline {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}
	article {
		display: flex;
		align-items: baseline;
		gap: 1rem;
	}
	article time {
		flex-shrink: 0;
		width: 6rem;
		color: var(--color-muted);
		font-size: var(--font-size-sm);
	}
	article h3 {
		margin: 0;
		font-size: 1rem;
		font-weight: normal;
	}
	article h3 a {
		text-decoration: none;
	}
	article h3 a:hover {
		text-decoration: underline;
	}
</style>
